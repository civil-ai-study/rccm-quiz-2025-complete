# RCCM Quiz App è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†

## ğŸ“ éƒ¨é–€ãƒãƒƒãƒ”ãƒ³ã‚°è¨­å®š (`department_mapping.json`)

### æ¦‚è¦
RCCM Quiz Appã®éƒ¨é–€åã¨ã‚«ãƒ†ã‚´ãƒªåã®å¯¾å¿œé–¢ä¿‚ã‚’å®šç¾©ã™ã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚å¤–éƒ¨è¨­å®šåŒ–ã«ã‚ˆã‚Šã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¿®æ­£ãªã—ã«éƒ¨é–€è¨­å®šã‚’å¤‰æ›´ã§ãã¾ã™ã€‚

### è¨­å®šæ§‹é€ 

#### `department_to_category_mapping`
éƒ¨é–€åï¼ˆè‹±èªï¼‰ã¨ã‚«ãƒ†ã‚´ãƒªåï¼ˆæ—¥æœ¬èªï¼‰ã®åŸºæœ¬ãƒãƒƒãƒ”ãƒ³ã‚°
```json
{
  "road": "é“è·¯",
  "tunnel": "ãƒˆãƒ³ãƒãƒ«",
  "river": "æ²³å·ã€ç ‚é˜²åŠã³æµ·å²¸ãƒ»æµ·æ´‹"
}
```

#### `legacy_department_aliases`
æ—§éƒ¨é–€åã‹ã‚‰æ–°éƒ¨é–€åã¸ã®å¤‰æ›è¨­å®šï¼ˆå¾Œæ–¹äº’æ›æ€§ï¼‰
```json
{
  "civil_planning": "river",
  "urban_planning": "urban"
}
```

#### `department_details`
å„éƒ¨é–€ã®è©³ç´°æƒ…å ±
```json
{
  "road": {
    "full_name": "é“è·¯éƒ¨é–€",
    "question_type": "specialist",
    "exam_code": "4-2",
    "priority": 1
  }
}
```

### è¨­å®šå¤‰æ›´æ‰‹é †

1. **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†**
   ```bash
   # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã
   nano config/department_mapping.json
   ```

2. **æ–°éƒ¨é–€è¿½åŠ ä¾‹**
   ```json
   {
     "department_to_category_mapping": {
       "existing_dept": "æ—¢å­˜ã‚«ãƒ†ã‚´ãƒª",
       "new_dept": "æ–°ã—ã„ã‚«ãƒ†ã‚´ãƒª"
     }
   }
   ```

3. **è¨­å®šåæ˜ **
   - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†èµ·å‹•ä¸è¦
   - è‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã«ã‚ˆã‚Šå³åº§ã«åæ˜ 
   - ã‚¨ãƒ©ãƒ¼æ™‚ã¯è‡ªå‹•çš„ã«æ—§è¨­å®šã§ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

### æ¤œè¨¼ãƒ«ãƒ¼ãƒ«

#### å¿…é ˆè¦ä»¶
- `department_to_category_mapping`ã‚»ã‚¯ã‚·ãƒ§ãƒ³å¿…é ˆ
- å„éƒ¨é–€åã¯ä¸€æ„ã®ã‚«ãƒ†ã‚´ãƒªã«å¯¾å¿œ
- é‡è¤‡ã‚«ãƒ†ã‚´ãƒªã¯æ¤œè¨¼ã‚¨ãƒ©ãƒ¼

#### æ¨å¥¨äº‹é …
- `meta`ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
- `validation_rules`ã§åˆ¶ç´„å®šç¾©
- `department_details`ã§è©³ç´°æƒ…å ±ç®¡ç†

### é‹ç”¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

#### 1. ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
```json
{
  "meta": {
    "version": "1.0.1",
    "last_updated": "2025-06-29",
    "changelog": "æ–°éƒ¨é–€è¿½åŠ : æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ "
  }
}
```

#### 2. å¤‰æ›´å±¥æ­´è¨˜éŒ²
```bash
# Git ã§ã®ç®¡ç†æ¨å¥¨
git add config/department_mapping.json
git commit -m "éƒ¨é–€è¨­å®šæ›´æ–°: æ–°éƒ¨é–€è¿½åŠ "
```

#### 3. ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã®äº‹å‰æ¤œè¨¼
```bash
# è¨­å®šæ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
python3 ultra_sync_department_config_manager.py
```

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### è¨­å®šã‚¨ãƒ©ãƒ¼æ™‚ã®å¯¾å‡¦
1. **JSONæ§‹æ–‡ã‚¨ãƒ©ãƒ¼**
   - è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®JSONæ§‹æ–‡ç¢ºèª
   - ã‚ªãƒ³ãƒ©ã‚¤ãƒ³JSONãƒãƒªãƒ‡ãƒ¼ã‚¿ãƒ¼ä½¿ç”¨

2. **æ¤œè¨¼ã‚¨ãƒ©ãƒ¼**
   ```bash
   # è¨­å®šæ¤œè¨¼å®Ÿè¡Œ
   python3 ultra_sync_department_config_manager.py
   ```

3. **ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‹•ä½œ**
   - ã‚¨ãƒ©ãƒ¼æ™‚ã¯è‡ªå‹•çš„ã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰è¨­å®šä½¿ç”¨
   - ãƒ­ã‚°ã§è©³ç´°ã‚¨ãƒ©ãƒ¼ç¢ºèªå¯èƒ½

#### ãƒ­ã‚°ç¢ºèª
```bash
# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°ç¢ºèª
tail -f rccm_app.log | grep department
```

### API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### è¨­å®šçŠ¶æ…‹ç¢ºèª
```bash
# ç¾åœ¨ã®è¨­å®šçŠ¶æ…‹ç¢ºèª
curl http://localhost:5000/api/department/config/status
```

#### å¼·åˆ¶ãƒªãƒ­ãƒ¼ãƒ‰
```bash
# è¨­å®šå¼·åˆ¶ãƒªãƒ­ãƒ¼ãƒ‰
curl -X POST http://localhost:5000/api/department/config/reload
```

### é–‹ç™ºè€…å‘ã‘æƒ…å ±

#### è¨­å®šç®¡ç†ã‚¯ãƒ©ã‚¹
- `UltraSyncDepartmentConfigManager`: ãƒ¡ã‚¤ãƒ³è¨­å®šç®¡ç†
- `UltraSyncAppIntegrationPatch`: app.pyçµ±åˆãƒ‘ãƒƒãƒ

#### ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰
```python
# éƒ¨é–€â†’ã‚«ãƒ†ã‚´ãƒªå¤‰æ›
get_category_by_department(department)

# éƒ¨é–€åæ­£è¦åŒ–
normalize_department_name(department)

# è¨­å®šãƒªãƒ­ãƒ¼ãƒ‰
reload_config()
```

#### çµ±åˆæ–¹æ³•
```python
# æ—¢å­˜app.pyã¨ã®çµ±åˆ
from ultra_sync_app_integration_patch import apply_integration_patch
patch_system = apply_integration_patch()
```

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

1. **ãƒ•ã‚¡ã‚¤ãƒ«æ¨©é™**
   ```bash
   # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ¨©é™è¨­å®š
   chmod 644 config/department_mapping.json
   ```

2. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**
   ```bash
   # å®šæœŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ¨å¥¨
   cp config/department_mapping.json config/department_mapping.json.backup
   ```

3. **å¤‰æ›´ç›£æŸ»**
   - Gitå±¥æ­´ã§å¤‰æ›´è¿½è·¡
   - é‡è¦å¤‰æ›´æ™‚ã¯äº‹å‰æ‰¿èªæ¨å¥¨

## ã‚µãƒãƒ¼ãƒˆ

è¨­å®šã«é–¢ã™ã‚‹è³ªå•ã‚„å•é¡Œã¯ã€é–‹ç™ºãƒãƒ¼ãƒ ã¾ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚

---

*RCCM Quiz App Development Team*  
*Last Updated: 2025-06-29*